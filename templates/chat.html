<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chatbot ‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•</title>
<link rel="stylesheet" href="/static/chat.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Mitr:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<style>
    body {
    margin: 0;
    font-family: "Mitr", sans-serif;
    
    background: #f0f2f5;
}
* {
    font-family: "Mitr", sans-serif;
}
.app {
    display: flex;
    height: 100vh;
}

/* Sidebar */
.sidebar {
    width: 280px;
    background: #fff;
    padding: 15px;
    border-right: 1px solid #ddd;
}

.sidebar h3 {
    margin-bottom: 15px;
}

.card {
    background: #f8f9fa;
    padding: 12px;
    border-radius: 10px;
    margin-bottom: 12px;
    font-size: 14px;
}

.card.green {
    background: #eafff0;
}

/* Chat */
.chat-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #fff;
}

.chat-header {
    padding: 15px;
    background: #fff;
    border-bottom: 1px solid #eee;
    font-weight: bold;
}

.chat-header small {
    display: block;
    font-size: 12px;
    color: green;
}

.chat-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}

/* Messages */
.message {
    max-width: 75%;
    padding: 10px 15px;
    border-radius: 18px;
    margin-bottom: 10px;
}

.bot {
    background: #f1f1f1;
}

.user {
    background: #2b7cff;
    color: white;
    margin-left: auto;
}

/* Quick actions */
.quick-actions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    padding: 10px;
    border-top: 1px solid #eee;
}

.quick-actions button {
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fff;
    cursor: pointer;
}
.quick-actions button,
.btn-complaint {
    width: 100%;
}
/* Footer */
.chat-footer {
    display: flex;
    padding: 10px;
    gap: 10px;
    border-top: 1px solid #eee;
}

.chat-footer input {
    flex: 1;
    padding: 12px;
    border-radius: 20px;
    border: 1px solid #ccc;
}

.btn-send {
    background: #2b7cff;
    color: white;
    border: none;
    width: 45px;
    border-radius: 50%;
    cursor: pointer;
}
.action-bar {
    padding: 10px 15px;
    background: #fafafa;
    border-bottom: 1px solid #eee;
    text-align: left;
}



/* ‡∏ü‡∏≠‡∏£‡πå‡∏° (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á) */
#complaintForm {
    background: #f9f9f9;
    padding: 12px;
    border-bottom: 1px solid #ddd;
}

#complaintForm input,
#complaintForm textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 8px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 14px;
}

.btn-send-form {
    width: 100%;
    padding: 10px;
    background: #28a745;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
}
.toggle-quick {
    padding: 8px 12px;
    border-top: 1px solid #eee;
    background: #fafafa;
}

.toggle-quick button {
    width: 100%;
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #ddd;
    background: #fff;
    cursor: pointer;
    font-size: 14px;
}

.toggle-quick button:hover {
    background: #f0f0f0;
}


/* Animation */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
/* =========================
   Responsive (Mobile)
========================= */
@media (max-width: 768px) {

    .app {
        flex-direction: column;
        height: 100dvh;
    }

    /* ‡∏ã‡πà‡∏≠‡∏ô sidebar ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    .sidebar {
        display: none;
    }

    /* ‡πÉ‡∏´‡πâ‡πÅ‡∏ä‡∏ó‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
    .chat-container {
        width: 100%;
        height: 100%;
    }

    /* Quick buttons ‡πÄ‡∏£‡∏µ‡∏¢‡∏á 1 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå */
    .quick-actions {
        grid-template-columns: 1fr;
    }

    /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ */
    .message {
        max-width: 90%;
        font-size: 14px;
    }

    /* Header ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡∏ô‡∏¥‡∏î */
    .chat-header {
        font-size: 16px;
    }

    /* Footer input ‡πÑ‡∏°‡πà‡∏≠‡πâ‡∏ß‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô */
    .chat-footer input {
        padding: 10px;
        font-size: 14px;
    }

}

</style>   

</head>

<body>
<div class="app">

    <!-- Sidebar -->
    <aside class="sidebar">
        <h3>‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</h3>

        <div class="card">
            <b>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</b>
            <p>‚Ä¢ ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 1,234</p>
            <p>‚Ä¢ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£: 45</p>
            <p>‚Ä¢ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô: 1,189</p>
        </div>

        <div class="card">
            <b>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</b>
            <p>‡∏ñ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏£‡∏≤‡∏à‡∏£ 35%</p>
            <p>‡∏Ç‡∏¢‡∏∞‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° 28%</p>
            <p>‡∏ô‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏õ‡∏≤ 18%</p>
            <p>‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞ 12%</p>
        </div>

        <div class="card green">
            <b>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</b>
            <p>‚úì ‡πÅ‡∏à‡πâ‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 24/7</p>
            <p>‚úì ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</p>
            <p>‚úì ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
        </div>
    </aside>

    <!-- Chat Area -->
    <main class="chat-container">

        <div class="chat-header">
            üí¨ ‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•
            <small>‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‚Ä¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</small>
        </div>

        <div class="chat-body" id="chat">
            <div class="message bot">
                ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•<br>
                ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞
            </div>
        </div>

        <div id="complaintForm" class="complaint-form" style="display:none;">
            <h4>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h4>

            <label>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤</label>
            <input id="issue" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏≠‡∏∏‡∏î‡∏ï‡∏±‡∏ô">

            <label>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á</label>
            <input id="department" placeholder="‡∏ñ‡πâ‡∏≤‡∏ó‡∏£‡∏≤‡∏ö">

            <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏</label>
            <input id="location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ã‡∏≠‡∏¢‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏• 3">

            <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <textarea id="detail" rows="3"
                placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."></textarea>

            <button class="btn-send-form" onclick="submitComplaint()">
                ‚úÖ ‡∏™‡πà‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
            </button>
        </div>
        
        <!-- Toggle Quick Buttons -->
        <div class="toggle-quick">
            <button onclick="toggleQuick()" id="toggleQuickBtn">
                ‚¨Ü ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πà‡∏ß‡∏ô
            </button>
        </div>


        <!-- Quick Buttons -->
        <div class="quick-actions" id="quickActions" style="display:none;">


            <button onclick="toggleForm()">üìÑ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>

            <button onclick="addMessage('‡∏Ç‡∏≠‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤','user')">‚ùì ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤</button>
            <button onclick="addMessage('‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞','user')">üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button>
            <button onclick="addMessage('‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•','user')">üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•</button>
            <button onclick="addMessage('‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á','user')">üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á</button>
            <button onclick="addMessage('‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£','user')">üïí ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£</button>

        </div>

        <!-- Input -->
        <div class="chat-footer">
            <input id="msg" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."
                   onkeydown="if(event.key==='Enter') send()">
            <button class="btn-send" onclick="send()">‚û§</button>
        </div>

    </main>
</div>
</body>


<script>
// --- ‡∏™‡πà‡∏ß‡∏ô JavaScript ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ ---
const chat = document.getElementById("chat");

function addMessage(text, sender){
    const div = document.createElement("div");
    div.className = "message " + sender;
    div.innerText = text;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

function toggleForm(){
    const f = document.getElementById("complaintForm");
    f.style.display = f.style.display === "none" ? "block" : "none";
}

async function submitComplaint(){
    const issue = document.getElementById("issue");
    const department = document.getElementById("department");
    const location = document.getElementById("location");
    const detail = document.getElementById("detail");

    if(!issue.value) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤"); return; }

    const data = {
        issue: issue.value,
        department: department.value,
        location: location.value,
        detail: detail.value
    };

    const res = await fetch("/complaint", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(data)
    });

    const result = await res.json();
    addMessage(result.message, "bot");

    issue.value = "";
    department.value = "";
    location.value = "";
    detail.value = "";
    toggleForm();
}

async function send(){
    const input = document.getElementById("msg");
    const text = input.value.trim();
    if(!text) return;

    addMessage(text, "user");
    input.value = "";

    const res = await fetch("/chat", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ message:text })
    });
    const data = await res.json();
    addMessage(data.reply, "bot");
}
function toggleQuick(){
    const quick = document.getElementById("quickActions");
    const btn = document.getElementById("toggleQuickBtn");

    if(quick.style.display === "none"){
        quick.style.display = "grid";
        btn.innerHTML = "‚¨á ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πà‡∏ß‡∏ô";
    } else {
        quick.style.display = "none";
        btn.innerHTML = "‚¨Ü ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πà‡∏ß‡∏ô";
    }
}

</script>

</body>
</html>